@startuml

actor "foo1" as client1

participant "access" as access1
participant "group-server" as group
database "storage" as db
participant "access" as access2
actor "foo2" as client2

autonumber
client1 --> access1 : msg publish
access1 --> group: validation
group --> access1: validation ack
access1 --> db: save msg
access1 --> client1 : publish ack(msg_id, sent_time)
access1 --> group: msg up stream
group --> access2: msg down stream
access2 --> client2: msg notify
client2 --> access2: notify ack
@enduml
